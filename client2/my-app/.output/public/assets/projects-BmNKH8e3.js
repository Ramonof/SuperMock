import{f,u as w,o as S,j as e,c as C,b,r as k,F as i,B as P,S as d,G as v,L as z,d as h,T as x}from"./a-Dk_0r4vP.js";import{u as j,a as y,B as m,b as B,S as u,C as E}from"./request-CC8WlHP9.js";import{u as g}from"./useMutation-Dsb0rPTi.js";import{I as F,a as I}from"./index-DonvnBFi.js";import{M as L}from"./index-CNcgRtj3.js";import{L as q}from"./link-DCSJ5__Y.js";const p=f(function(n,o){const a=w("Badge",n),{className:l,...r}=S(n);return e.jsx(C.span,{ref:o,className:b("chakra-badge",n.className),...r,__css:{display:"inline-block",whiteSpace:"nowrap",verticalAlign:"middle",...a}})});p.displayName="Badge";const A=()=>{const[t,n]=k.useState(""),o=j(),{mutate:a,isPending:l}=g({mutationKey:["createProject"],mutationFn:async r=>{r.preventDefault();try{const s=await y({url:m+"/projects",method:"POST",data:JSON.stringify({name:t})});return n(""),s}catch(s){throw new Error(s)}},onSuccess:()=>{o.invalidateQueries({queryKey:["projects"]})},onError:r=>{alert(r.message)}});return e.jsx("form",{onSubmit:a,children:e.jsxs(i,{gap:2,children:[e.jsx(F,{type:"text",value:t,onChange:r=>n(r.target.value),ref:r=>r&&r.focus()}),e.jsx(P,{mx:2,type:"submit",_active:{transform:"scale(.97)"},children:l?e.jsx(d,{size:"xs"}):e.jsx(I,{size:30})})]})})};function K(t){return v({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(t)}const T=({Project:t})=>{const n=j(),{mutate:o,isPending:a}=g({mutationKey:["updateProject"],mutationFn:async()=>{if(t.completed)return alert("Project is already completed");try{const s=await fetch(m+`/projects/${t._id}`,{method:"PATCH"}),c=await s.json();if(!s.ok)throw new Error(c.error||"Something went wrong");return c}catch(s){console.log(s)}},onSuccess:()=>{n.invalidateQueries({queryKey:["projects"]})}}),{mutate:l,isPending:r}=g({mutationKey:["deleteProject"],mutationFn:async()=>{try{const s=await fetch(m+`/projects/${t._id}`,{method:"DELETE"}),c=await s.json();if(!s.ok)throw new Error(c.error||"Something went wrong");return c}catch(s){console.log(s)}},onSuccess:()=>{n.invalidateQueries({queryKey:["projects"]})}});return e.jsxs(i,{gap:2,alignItems:"center",children:[e.jsxs(i,{flex:1,alignItems:"center",border:"1px",borderColor:"gray.600",p:2,borderRadius:"lg",justifyContent:"space-between",children:[e.jsx(q,{as:z,to:`/project/${t.id}`,color:t.completed?"green.200":"yellow.100",textDecoration:t.completed?"line-through":"none",variant:"underline",colorPalette:"teal",children:t.name})," ",t.completed&&e.jsx(p,{ml:"1",colorScheme:"green",children:"Done"}),!t.completed&&e.jsx(p,{ml:"1",colorScheme:"yellow",children:"Rest"})]}),e.jsxs(i,{gap:2,alignItems:"center",children:[e.jsxs(h,{color:"green.500",cursor:"pointer",onClick:()=>o(),children:[!a&&e.jsx(K,{size:20}),a&&e.jsx(d,{size:"sm"})]}),e.jsxs(h,{color:"red.500",cursor:"pointer",onClick:()=>l(),children:[!r&&e.jsx(L,{size:25}),r&&e.jsx(d,{size:"sm"})]})]})]})},_=()=>{const{data:t,isLoading:n}=B({queryKey:["projects"],queryFn:async()=>{try{return(await y({url:m+"/projects",method:"get"})).data||[]}catch(o){console.log(o)}}});return e.jsxs(e.Fragment,{children:[e.jsx(x,{fontSize:"4xl",textTransform:"uppercase",fontWeight:"bold",textAlign:"center",my:2,bgGradient:"linear(to-l, #0bf827ff, #4000ffff)",bgClip:"text",children:"Projects"}),n&&e.jsx(i,{justifyContent:"center",my:4,children:e.jsx(d,{size:"xl"})}),!n&&t?.length===0&&e.jsxs(u,{alignItems:"center",gap:"3",children:[e.jsx(x,{fontSize:"xl",textAlign:"center",color:"gray.500",children:"All tasks completed! ðŸ¤ž"}),e.jsx("img",{src:"/go.png",alt:"Go logo",width:70,height:70})]}),e.jsx(u,{gap:3,children:t?.map(o=>e.jsx(T,{Project:o},o._id))})]})};function $(){return e.jsx(u,{h:"100vh",children:e.jsxs(E,{children:[e.jsx(A,{}),e.jsx(_,{})]})})}export{$ as component};
